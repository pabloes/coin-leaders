specVersion: 0.0.4
description: A subgraph for indexing MultiTokenHighscore contract
repository: https://github.com/pabloes/coin-leaders

schema:
  file: ./schema.graphql

dataSources:
  - kind: ethereum/contract
    name: MultiTokenHighscore
    network: base
    source:
      address: "0x19Ba4d193f9601C85c73A9cD7a68C2EAE2a1d49f"
      abi: MultiTokenHighscore
      startBlock: 20966765
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TokenLeaderboard
        - TokenTotal
        - User
        - UserTokenEarning
        - MetaEventEntity
        - DepositEntity
      abis:
        - name: MultiTokenHighscore
          file: ./abis/MultiTokenHighscore.json
        - name: ERC20
          file: ./abis/ERC20.json # Include the ERC20 ABI file
      eventHandlers:
        - event: Deposit(indexed address,indexed address,uint256,address,address)
          handler: handleDeposit
        - event: DepositInfo(indexed address,indexed address,string,string,string)
          handler: handleDepositInfo
        - event: ReceiverChanged(indexed address,indexed address)
          handler: handleReceiverChanged
        - event: ReferrerQuoteChanged(uint8,uint8)
          handler: handleReferrerQuoteChanged
        - event: CommQuoteChanged(uint8,uint8)
          handler: handleCommQuoteChanged
        - event: MetaEvent(uint256,string)
          handler: handleMetaEvent
      file: ./src/mappings.ts